// ═══════════════════════════════════════════════════════════════
// Автоматически сгенерированный код
// AI-1C-Code-Generation-Benchmark
// ═══════════════════════════════════════════════════════════════
//
// Задача: A4 - Парсинг JSON-строки
// Модель: Claude Opus 4.5 (anthropic/claude-opus-4.5)
// Прогон: 3
// Temperature: 0.0
// Hash: deff6bd9f2f1eb4e1195618485fc905a
// Время: 2026-02-05T23:29:49.158383
//
// ═══════════════════════════════════════════════════════════════

```1c
Функция РазобратьJSON(СтрокаJSON)
    
    Попытка
        ЧтениеJSON = Новый ЧтениеJSON;
        ЧтениеJSON.УстановитьСтроку(СтрокаJSON);
        Результат = ПрочитатьJSON(ЧтениеJSON);
        ЧтениеJSON.Закрыть();
        Возврат Результат;
    Исключение
        Возврат Неопределено;
    КонецПопытки;
    
КонецФункции

Функция РазобратьJSONВручную(СтрокаJSON)
    
    Попытка
        Позиция = 1;
        Результат = ПрочитатьЗначение(СтрокаJSON, Позиция);
        Возврат Результат;
    Исключение
        Возврат Неопределено;
    КонецПопытки;
    
КонецФункции

Функция ПрочитатьЗначение(СтрокаJSON, Позиция)
    
    ПропуститьПробелы(СтрокаJSON, Позиция);
    
    Если Позиция > СтрДлина(СтрокаJSON) Тогда
        ВызватьИсключение "Неожиданный конец строки";
    КонецЕсли;
    
    ТекущийСимвол = Сред(СтрокаJSON, Позиция, 1);
    
    Если ТекущийСимвол = "{" Тогда
        Возврат ПрочитатьОбъект(СтрокаJSON, Позиция);
    ИначеЕсли ТекущийСимвол = "[" Тогда
        Возврат ПрочитатьМассив(СтрокаJSON, Позиция);
    ИначеЕсли ТекущийСимвол = """" Тогда
        Возврат ПрочитатьСтроку(СтрокаJSON, Позиция);
    ИначеЕсли ТекущийСимвол = "t" ИЛИ ТекущийСимвол = "f" Тогда
        Возврат ПрочитатьБулево(СтрокаJSON, Позиция);
    ИначеЕсли ТекущийСимвол = "n" Тогда
        Возврат ПрочитатьNull(СтрокаJSON, Позиция);
    ИначеЕсли ЭтоНачалоЧисла(ТекущийСимвол) Тогда
        Возврат ПрочитатьЧисло(СтрокаJSON, Позиция);
    Иначе
        ВызватьИсключение "Неожиданный символ: " + ТекущийСимвол;
    КонецЕсли;
    
КонецФункции

Функция ПрочитатьОбъект(СтрокаJSON, Позиция)
    
    Результат = Новый Структура;
    Позиция = Позиция + 1;
    ПропуститьПробелы(СтрокаJSON, Позиция);
    
    Если Сред(СтрокаJSON, Позиция, 1) = "}" Тогда
        Позиция = Позиция + 1;
        Возврат Результат;
    КонецЕсли;
    
    Пока Истина Цикл
        ПропуститьПробелы(СтрокаJSON, Позиция);
        
        Если Сред(СтрокаJSON, Позиция, 1) <> """" Тогда
            ВызватьИсключение "Ожидалось имя свойства";
        КонецЕсли;
        
        Ключ = ПрочитатьСтроку(СтрокаJSON, Позиция);
        ПропуститьПробелы(СтрокаJSON, Позиция);
        
        Если Сред(СтрокаJSON, Позиция, 1) <> ":" Тогда
            ВызватьИсключение "Ожидался символ ':'";
        КонецЕсли;
        
        Позиция = Позиция + 1;
        Значение = ПрочитатьЗначение(СтрокаJSON, Позиция);
        Результат.Вставить(Ключ, Значение);
        
        ПропуститьПробелы(СтрокаJSON, Позиция);
        ТекущийСимвол = Сред(СтрокаJSON, Позиция, 1);
        
        Если ТекущийСимвол = "}" Тогда
            Позиция = Позиция + 1;
            Возврат Результат;
        ИначеЕсли ТекущийСимвол = "," Тогда
            Позиция = Позиция + 1;
        Иначе
            ВызватьИсключение "Ожидался символ ',' или '}'";
        КонецЕсли;
    КонецЦикла;
    
КонецФункции

Функция ПрочитатьМассив(СтрокаJSON, Позиция)
    
    Результат = Новый Массив;
    Позиция = Позиция + 1;
    ПропуститьПробелы(СтрокаJSON, Позиция);
    
    Если Сред(СтрокаJSON, Позиция, 1) = "]" Тогда
        Позиция = Позиция + 1;
        Возврат Результат;
    КонецЕсли;
    
    Пока Истина Цикл
        Значение = ПрочитатьЗначение(СтрокаJSON, Позиция);
        Результат.Добавить(Значение);
        
        ПропуститьПробелы(СтрокаJSON, Позиция);
        ТекущийСимвол = Сред(СтрокаJSON, Позиция, 1);
        
        Если ТекущийСимвол = "]" Тогда
            Позиция = Позиция + 1;
            Возврат Результат;
        ИначеЕсли ТекущийСимвол = "," Тогда
            Позиция = Позиция + 1;
        Иначе
            ВызватьИсключение "Ожидался символ ',' или ']'";
        КонецЕсли;
    КонецЦикла;
    
КонецФункции

Функция ПрочитатьСтроку(СтрокаJSON, Позиция)
    
    Позиция = Позиция + 1;
    Результат = "";
    
    Пока Позиция <= СтрДлина(СтрокаJSON) Цикл
        ТекущийСимвол = Сред(СтрокаJSON, Позиция, 1);
        
        Если ТекущийСимвол = """" Тогда
            Позиция = Позиция + 1;
            Возврат Результат;
        ИначеЕсли ТекущийСимвол = "\" Тогда
            Позиция = Позиция + 1;
            СледующийСимвол = Сред(СтрокаJSON, Позиция, 1);
            
            Если СледующийСимвол = """" Тогда
                Результат = Результат + """";
            ИначеЕсли СледующийСимвол = "\" Тогда
                Результат = Результат + "\";
            ИначеЕсли СледующийСимвол = "/" Тогда
                Результат = Результат + "/";
            ИначеЕсли СледующийСимвол = "b" Тогда
                Результат = Результат + Символ(8);
            ИначеЕсли СледующийСимвол = "f" Тогда
                Результат = Результат + Символ(12);
            ИначеЕсли СледующийСимвол = "n" Тогда
                Результат = Результат + Символы.ПС;
            ИначеЕсли СледующийСимвол = "r" Тогда
                Результат = Результат + Символы.ВК;
            ИначеЕсли СледующийСимвол = "t" Тогда
                Результат = Результат + Символы.Таб;
            ИначеЕсли СледующийСимвол = "u" Тогда
                КодСимвола = Сред(СтрокаJSON, Позиция + 1, 4);
                Результат = Результат + Символ(ЧислоИзШестнадцатеричнойСтроки("0x" + КодСимвола));
                Позиция = Позиция + 4;
            КонецЕсли;
            
            Позиция = Позиция + 1;
        Иначе
            Результат = Результат + ТекущийСимвол;
            Позиция = Позиция + 1;
        КонецЕсли;
    КонецЦикла;
    
    ВызватьИсключение "Незакрытая строка";
    
КонецФункции

Функция ПрочитатьЧисло(СтрокаJSON, Позиция)
    
    НачальнаяПозиция = Позиция;
    
    Если Сред(СтрокаJSON, Позиция, 1) = "-" Тогда
        Позиция = Позиция + 1;
    КонецЕсли;
    
    Пока Позиция <= СтрДлина(СтрокаJSON) И ЭтоЦифра(Сред(СтрокаJSON, Позиция, 1)) Цикл
        Позиция = Позиция + 1;
    КонецЦикла;
    
    Если Позиция <= СтрДлина(СтрокаJSON) И Сред(СтрокаJSON, Позиция, 1) = "." Тогда
        Позиция = Позиция + 1;
        Пока Позиция <= СтрДлина(СтрокаJSON) И ЭтоЦифра(Сред(СтрокаJSON, Позиция, 1)) Цикл
            Позиция = Позиция + 1;
        КонецЦикла;
    КонецЕсли;
    
    Если Позиция <= СтрДлина(СтрокаJSON) И (Сред(СтрокаJSON, Позиция, 1) = "e" ИЛИ Сред(СтрокаJSON, Позиция, 1) = "E") Тогда
        Позиция = Позиция + 1;
        Если Сред(СтрокаJSON, Позиция, 1) = "+" ИЛИ Сред(СтрокаJSON, Позиция, 1) = "-" Тогда
            Позиция = Позиция + 1;
        КонецЕсли;
        Пока Позиция <= СтрДлина(СтрокаJSON) И ЭтоЦифра(Сред(СтрокаJSON, Позиция, 1)) Цикл
            Позиция = Позиция + 1;
        КонецЦикла;
    КонецЕсли;
    
    СтрокаЧисла = Сред(СтрокаJSON, НачальнаяПозиция, Позиция - НачальнаяПозиция);
    Возврат Число(СтрЗаменить(СтрокаЧисла, ".", ","));
    
КонецФункции

Функция ПрочитатьБулево(СтрокаJSON, Позиция)
    
    Если Сред(СтрокаJSON, Позиция, 4) = "true" Тогда
        Позиция = Позиция + 4;
        Возврат Истина;
    ИначеЕсли Сред(СтрокаJSON, Позиция, 5) = "false" Тогда
        Позиция = Позиция + 5;
        Возврат Ложь;
    Иначе
        ВызватьИсключение "Неверное булево значение";
    КонецЕсли;
    
КонецФункции

Функция ПрочитатьNull(СтрокаJSON, Позиция)
    
    Если Сред(СтрокаJSON, Позиция, 4) = "null" Тогда
        Позиция = Позиция + 4;
        Возврат Неопределено;
    Иначе
        ВызватьИсключение "Неверное значение null";
    КонецЕсли;
    
КонецФункции

Процедура ПропуститьПробелы(СтрокаJSON, Позиция)
    
    Пока Позиция <= СтрДлина(СтрокаJSON) Цикл
        ТекущийСимвол = Сред(СтрокаJSON, Позиция, 1);
        Если ТекущийСимвол = " " ИЛИ ТекущийСимвол = Символы.Таб ИЛИ ТекущийСимвол = Символы.ПС ИЛИ ТекущийСимвол = Символы.ВК Тогда
            Позиция = Позиция + 1;
        Иначе
            Возврат;
        КонецЕсли;
    КонецЦикла;
    
КонецПроцедуры

Функция ЭтоЦифра(Символ)
    
    Возврат Символ >= "0" И Символ <= "9";
    
КонецФункции

Функция ЭтоНачалоЧисла(Символ)
    
    Возврат ЭтоЦифра(Символ) ИЛИ Символ = "-";
    
