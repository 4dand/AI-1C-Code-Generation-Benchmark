// ═══════════════════════════════════════════════════════════════
// Автоматически сгенерированный код
// AI-1C-Code-Generation-Benchmark
// ═══════════════════════════════════════════════════════════════
//
// Задача: A4 - Парсинг JSON-строки
// Модель: GPT-5.2 Codex (openai/gpt-5.2-codex)
// Прогон: 1
// Seed: 178
// Temperature: 0.1
// Hash: d82dde45d17a00114255925c432c03f8
// Время: 2026-02-05T23:29:49.158383
//
// ═══════════════════════════════════════════════════════════════

Перем gJSON;
Перем gPos;
Перем gLen;
Перем gError;

Функция ПарситьJSON(СтрокаJSON) Экспорт
	gJSON = СтрокаJSON;
	gPos = 1;
	gLen = СтрДлина(gJSON);
	gError = Ложь;
	
	Результат = _ParseValue();
	_SkipWS();
	
	Если gError Или gPos <= gLen Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Возврат Результат;
КонецФункции

Функция _ParseValue()
	_SkipWS();
	Если gPos > gLen Тогда
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	Симв = _PeekChar();
	
	Если Симв = "{" Тогда
		Возврат _ParseObject();
	ИначеЕсли Симв = "[" Тогда
		Возврат _ParseArray();
	ИначеЕсли Симв = """" Тогда
		Возврат _ParseString();
	ИначеЕсли Симв = "t" Или Симв = "f" Или Симв = "n" Тогда
		Возврат _ParseLiteral();
	ИначеЕсли Симв = "-" Или _IsDigit(Симв) Тогда
		Возврат _ParseNumber();
	Иначе
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
КонецФункции

Функция _ParseObject()
	Если _GetChar() <> "{" Тогда
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	Объект = Новый Структура;
	_SkipWS();
	
	Если gPos <= gLen И _PeekChar() = "}" Тогда
		_GetChar();
		Возврат Объект;
	КонецЕсли;
	
	Пока Истина Цикл
		_SkipWS();
		Если gPos > gLen Или _PeekChar() <> """" Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		
		Ключ = _ParseString();
		Если gError Тогда Возврат Неопределено;
		
		_SkipWS();
		Если gPos > gLen Или _GetChar() <> ":" Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		
		Значение = _ParseValue();
		Если gError Тогда Возврат Неопределено;
		
		Объект.Вставить(Ключ, Значение);
		
		_SkipWS();
		Если gPos > gLen Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		
		Симв = _GetChar();
		Если Симв = "}" Тогда
			Прервать;
		ИначеЕсли Симв = "," Тогда
			Продолжить;
		Иначе
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
	КонецЦикла;
	
	Возврат Объект;
КонецФункции

Функция _ParseArray()
	Если _GetChar() <> "[" Тогда
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	МассивЗначений = Новый Массив;
	_SkipWS();
	
	Если gPos <= gLen И _PeekChar() = "]" Тогда
		_GetChar();
		Возврат МассивЗначений;
	КонецЕсли;
	
	Пока Истина Цикл
		Значение = _ParseValue();
		Если gError Тогда Возврат Неопределено;
		
		МассивЗначений.Добавить(Значение);
		
		_SkipWS();
		Если gPos > gLen Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		
		Симв = _GetChar();
		Если Симв = "]" Тогда
			Прервать;
		ИначеЕсли Симв = "," Тогда
			Продолжить;
		Иначе
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
	КонецЦикла;
	
	Возврат МассивЗначений;
КонецФункции

Функция _ParseString()
	Если _GetChar() <> """" Тогда
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	Результат = "";
	Пока gPos <= gLen Цикл
		Симв = _GetChar();
		Если Симв = """" Тогда
			Возврат Результат;
		ИначеЕсли Симв = "\" Тогда
			Если gPos > gLen Тогда
				gError = Истина;
				Возврат Неопределено;
			КонецЕсли;
			Экранир = _GetChar();
			Выбор
				Когда Экранир = """" Тогда Результат = Результат + """";
				Когда Экранир = "\" Тогда Результат = Результат + "\";
				Когда Экранир = "/" Тогда Результат = Результат + "/";
				Когда Экранир = "b" Тогда Результат = Результат + Символ(8);
				Когда Экранир = "f" Тогда Результат = Результат + Символ(12);
				Когда Экранир = "n" Тогда Результат = Результат + Символ(10);
				Когда Экранир = "r" Тогда Результат = Результат + Символ(13);
				Когда Экранир = "t" Тогда Результат = Результат + Символ(9);
				Когда Экранир = "u" Тогда
					Если gPos + 3 > gLen Тогда
						gError = Истина;
						Возврат Неопределено;
					КонецЕсли;
					Код = 0;
					Для И = 1 По 4 Цикл
						С = _GetChar();
						Х = _HexValue(С);
						Если Х < 0 Тогда
							gError = Истина;
							Возврат Неопределено;
						КонецЕсли;
						Код = Код * 16 + Х;
					КонецЦикла;
					Результат = Результат + Символ(Код);
				Иначе
					gError = Истина;
					Возврат Неопределено;
			КонецВыбора;
		Иначе
			Результат = Результат + Симв;
		КонецЕсли;
	КонецЦикла;
	
	gError = Истина;
	Возврат Неопределено;
КонецФункции

Функция _ParseNumber()
	НачПозиция = gPos;
	Если _PeekChar() = "-" Тогда
		gPos = gPos + 1;
	КонецЕсли;
	
	Если gPos > gLen Тогда
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	Если _PeekChar() = "0" Тогда
		gPos = gPos + 1;
	ИначеЕсли _IsDigit(_PeekChar()) Тогда
		Пока gPos <= gLen И _IsDigit(_PeekChar()) Цикл
			gPos = gPos + 1;
		КонецЦикла;
	Иначе
		gError = Истина;
		Возврат Неопределено;
	КонецЕсли;
	
	Если gPos <= gLen И _PeekChar() = "." Тогда
		gPos = gPos + 1;
		Если gPos > gLen Или Не _IsDigit(_PeekChar()) Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		Пока gPos <= gLen И _IsDigit(_PeekChar()) Цикл
			gPos = gPos + 1;
		КонецЦикла;
	КонецЕсли;
	
	Если gPos <= gLen И (_PeekChar() = "e" Или _PeekChar() = "E") Тогда
		gPos = gPos + 1;
		Если gPos <= gLen И (_PeekChar() = "+" Или _PeekChar() = "-") Тогда
			gPos = gPos + 1;
		КонецЕсли;
		Если gPos > gLen Или Не _IsDigit(_PeekChar()) Тогда
			gError = Истина;
			Возврат Неопределено;
		КонецЕсли;
		Пока gPos <= gLen И _IsDigit(_PeekChar()) Цикл
			gPos = gPos + 1;
		КонецЦикла;
	КонецЕсли;
	
	ЧислоСтрокой = Сред(gJSON, НачПозиция, gPos - НачПозиция);
	ЧислоСтрокой = СтрЗаменить(ЧислоСтрокой, ".", ",");
	Попытка
		Результат = Число(ЧислоСтрокой);
	Исключение
		gError = Истина;
		Возврат Неопределено;
	КонецПопытки;
	
	Возврат Результат;
КонецФункции

Функция _ParseLiteral()
	Если _MatchLiteral("true") Тогда
		Возврат Истина;
	ИначеЕсли _Match
