# =============================================================================
# AI-1C-Code-Generation-Benchmark — Централизованные настройки
# =============================================================================
#
# Этот файл содержит ВСЕ настройки проекта в одном месте.
# Секреты (API ключи) загружаются из .env файла или переменных окружения.
#
# Настройки генераций для задач категорий A/B остаются 
# в отдельных файлах для гибкости.
# =============================================================================


# Пути проекта
paths:
  configs_dir: "configs"            # Папка с конфигами
  raw_results_dir: "raw_results"    # Папка для сырых JSON результатов
  code_outputs_dir: "code_outputs"  # Папка для экспорта .bsl файлов
  logs_dir: "logs"                  # Папка для логов
  cache_dir: "cache"                # Папка для кэша

  # Файлы конфигов (относительно configs_dir)
  experiment_file: "experiment.yaml"
  models_file: "models.yaml"
  tasks_category_a: "tasks_category_A.yaml"
  tasks_category_b: "tasks_category_B.yaml"


# OpenRouter API
openrouter:
  # API ключ загружается из .env (OPENROUTER_API_KEY)
  base_url: "https://openrouter.ai/api/v1"
  http_referer: "https://1c-benchmark.local"
  app_title: "AI-1C-Code-Generation-Benchmark"
  timeout: 120  # секунды


# MCP сервер (https://github.com/vladimir-kharin/1c_mcp)
# для задач категории B — работа с метаданными 1С)
mcp:
  url: "http://localhost:8000"
  timeout: 30  # секунды


# Агент контекста (Agentic Context Loader)
# для исследования метаданных и инструментов 1С (только для категории B)
agent:
  model: "google/gemini-2.0-flash-001"   # Модель для анализа метаданных
  max_iterations: 10                     # Максимум итераций агента
  max_context_lines: 80                  # Сокращение контекста для экономии токенов
  cache:
    enabled: true                        # Кэшировать собранный контекст
    dir: "context"                       # Подпапка в cache_dir
    ttl_hours: 24                        # Время жизни кэша
  # промпты для агента сбора контекста (agentic context loader)
  prompts:
    system: |
      Тебе необходимо изучить метаданные конфигурации для выполнения задачи.
      У тебя есть доступ к MCP серверу 1С с инструментами для работы с метаданными.
      Используй доступные инструменты для исследования конфигурации.
      Стратегия:
      1. Проанализируй задачу — какие данные нужны?
      2. Используй инструменты для поиска и изучения объектов метаданных
      3. Когда понял какие объекты использовать — вызови finish_research
      Будь экономным — не запрашивай лишние объекты!
    user_template: |
      Задача:
      {task_prompt}
      
      Изучи метаданные конфигурации и определи какие объекты нужны для решения этой задачи.
      Используй инструменты для исследования, затем вызови finish_research.


# Хеширование ответов (для оценки детерминизма)
hashing:
  algorithm: "md5"    # md5, sha256
  normalize: true     # Убирать пробелы/переносы перед хешированием
  extract_code: true  # Извлекать код из markdown блоков


# Логирование
logging:
  level: "INFO"
  format: "[%(asctime)s] [%(levelname)s] %(name)s: %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  console:
    enabled: false
    level: "INFO"
    colorize: true
  file:
    enabled: true
    path: "benchmark.log"
    level: "DEBUG"
    rotation:
      enabled: true
      max_size_mb: 10
      backup_count: 5  


# Экспорт кода
export:
  code_to_bsl: true     # Экспортировать код в .bsl файлы
