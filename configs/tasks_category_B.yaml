# категория B: Задачи с контекстом метаданных УТ11

category:
  id: "B"
  name: "Платформенные задачи"
  description: "Задачи, требующие знания метаданных конфигурации УТ11"
  requires_mcp: true

# параметры генерации для этой категории
generation:
  max_tokens: 4096
  model_params:
    claude:
      temperature: 0.0
      runs: 3  # сlaude без seed — указываем явно количество прогонов
    gpt:
      temperature: 0.1
      seeds: [178, 256, 349]  # длина = количество прогонов
    gemini:
      temperature: 0.1
      seeds: [178, 256, 349]

# системный промпт для категории B (контекст добавляется динамически)
system_prompt: |
  Разработка для платформы 1С:Предприятие 8.3.
  Конфигурация: Управление торговлей 11 (УТ11).
  КРИТИЧЕСКИ ВАЖНО:
  1. Используйте ТОЛЬКО объекты метаданных через MCP
  2. НЕ выдумывайте несуществующие реквизиты, справочники или регистры
  3. Пишите на встроенном языке 1С (русский синтаксис)
  4. Возвращайте ТОЛЬКО код без пояснений
  5. Код должен быть готов к выполнению

tasks:
  - id: "B1"
    name: "Получение остатков товаров массива"
    difficulty: "medium"
    prompt: |
      Написать функцию получения остатков товаров на складе. 
      Параметры: массив номенклатуры, склад, 
      группа номенклатуры (опционально). 
      Вернуть таблицу значений с остатками по каждой позиции. 
      Если передана группа — вернуть только товары, входящие в эту группу и её подгруппы.

  - id: "B2"
    name: "Заполнение цен в табличной части"
    difficulty: "hard"
    prompt: |
      Написать процедуру заполнения цен в табличной части «Товары» документа. 
      Параметры: табличная часть, тип цен, дата. 
      Получить актуальные цены из регистра сведений и пересчитать суммы строк. 
      Если цена не найдена — оставить нулевое значение.

  - id: "B3"
    name: "Списание товаров по FIFO"
    difficulty: "hard"
    prompt: |
      Написать процедуру списания товаров со склада методом FIFO. 
      Параметры: таблица товаров к списанию (номенклатура, количество), склад. 
      Вернуть таблицу с распределением по партиям. 
      При недостатке остатков вызвать исключение с указанием проблемной номенклатуры.

  - id: "B4"
    name: "Расчёт себестоимости продажи"
    difficulty: "medium" 
    prompt: |
      Написать функцию расчёта себестоимости товаров методом 
      средневзвешенной стоимости. 
      Параметры: массив номенклатуры, склад, дата. 
      Вернуть таблицу со средней ценой по каждой позиции 
      на основании остатков партий.
    
  - id: "B5"
    name: "Пересчёт валютных сумм"
    difficulty: "hard"    
    prompt: |
      Написать процедуру пересчёта сумм документа при смене валюты. 
      Параметры: табличная часть «Товары», исходная валюта, 
      новая валюта, дата курса. Пересчитать цены и суммы через кросс-курс. 
      При отсутствии курса вызвать исключение.
    